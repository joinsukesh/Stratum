@using Stratum.Feature.PageContent.Models
@using Sitecore.Mvc
@using Stratum.Foundation.Common.Models
@using Stratum.Foundation.Common.Services
@using Stratum.Foundation.Common.Utilities
@model NumberedGridTilesSection
@{
    Layout = null;
    BaseRenderingParams brParams = new CommonService().GetBaseRenderingParams();
    bool isExperienceEditor = SitecoreUtility.IsExperienceEditorMode();
    bool showTileNumbers = Model != null ? Model.ShowTileNumbers : false;
    int delaySeconds = 100;
    NumberedGridTile tile = null;
}

@if (Model != null)
{
    <section id="@brParams.SectionId" class="steps @(brParams.AddDefaultBackgroundColor ? "section-bg" : "")" style="@(brParams.AddDefaultBackgroundColor ? "" : string.Format("background-color:{0}", brParams.BackgroundColor))">
        <div class="container">
            <div class="row no-gutters">
                @if ((Model.Tiles != null && Model.Tiles.Count > 0) || isExperienceEditor)
                {
                    if ((Model.Tiles == null || Model.Tiles.Count == 0) && isExperienceEditor)
                    {
                        <div>
                            <h3>Add child tile items</h3>
                        </div>
                    }
                    else if (Model.Tiles != null && Model.Tiles.Count > 0)
                    {
                        for (int index = 1; index <= Model.Tiles.Count; index++)
                        {
                            tile = Model.Tiles[index - 1];
                            if (tile != null)
                            {
                                <div class="col-lg-4 col-md-6 content-item" data-aos="fade-in" data-aos-delay="@(index > 1 ? string.Format("{0}", ((index-1) * delaySeconds)) : "")">
                                    @if (showTileNumbers || isExperienceEditor)
                                    {
                                        <span>@(index < 10 ? string.Format("0{0}", index) : string.Format("{0}",index))</span>
                                    }
                                    @if ((!string.IsNullOrWhiteSpace(tile.Title)) || isExperienceEditor)
                                    {
                                        @Html.Sitecore().Field(tile.TitleId, tile.InnerItem)
                                    }
                                    @if ((!string.IsNullOrWhiteSpace(tile.Description)) || isExperienceEditor)
                                    {
                                        @Html.Sitecore().Field(tile.DescriptionId, tile.InnerItem)
                                    }
                                </div>
                            }
                        }
                    }
                }
            </div>
        </div>
    </section>
}
else
{
    <span></span>
}
