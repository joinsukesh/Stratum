@using Stratum.Feature.Accounts.Models
@using Sitecore.Mvc
@using Stratum.Foundation.Common
@using Stratum.Foundation.Common.Utilities
@using System.Web.Mvc
@model ForgotPassword
@{
    Layout = null;
    bool isExperienceEditor = SitecoreUtility.IsExperienceEditorMode();
}

@if (Model != null)
{
    <section id="@Model.SectionId" class="@Model.SectionCssClass">
        <div class="container">
            @if ((!MvcHtmlString.IsNullOrEmpty(Model.Title)) || (!MvcHtmlString.IsNullOrEmpty(Model.Description)) || isExperienceEditor)
            {
                <div class="section-title" data-aos="fade-up">
                    @if ((!MvcHtmlString.IsNullOrEmpty(Model.Title)) || isExperienceEditor)
                    {
                        @Model.Title
                    }
                    @if ((!MvcHtmlString.IsNullOrEmpty(Model.Description)) || isExperienceEditor)
                    {
                        @Model.Description
                    }
                </div>
            }
            <div class="row justify-content-center" data-aos="fade-up" style="margin-top:-45px;">
                <div class="col-lg-10">
                    @using (Ajax.BeginForm("SendForgotPasswordEmail", "Accounts",
                    new AjaxOptions
                    {
                        HttpMethod = "Post",
                        OnBegin = "OnBegin_SFPE",
                        OnSuccess = "OnSuccess_SFPE",
                        OnFailure = "OnFailure_SFPE"
                    }, new { @class = "php-email-form", id = "formForgotPassword" }))
                    {
                        @Html.AntiForgeryToken()

                        @Html.HiddenFor(x => x.ResetPasswordPageUrl, new { id = "ResetPasswordPageUrl" })
                        <div class="form-group mt-3">
                            @Html.TextBoxFor(x => x.Email, new { @class = "form-control", type = "email", maxlength = "50", autocomplete = "off", id = "Email", placeholder = CommonDictionaryValues.Labels.Email })
                            @Html.ValidationMessageFor(x => x.Email, null, "span")
                        </div>
                        <div class="text-center"><button id="btnFpSubmit" type="submit">@CommonDictionaryValues.Labels.Submit</button></div>
                        <div class="form-group mt-3">
                            <div id="divFpSubmitStatus">

                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </section>
}
else
{
    <span></span>
}
